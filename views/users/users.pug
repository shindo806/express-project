extends ../layouts/common

block content
    div(class="container")
        h1 Users List
        a(href="/") Back to Homepage
        br 
        a(href="/users/create") Create a new user
        form(class="d-flex" action="/users/search", method="GET")
            div(class="mb-3")
                input(id="input-field" type="text" name="q")
                button(class="btn btn-primary ml-2 mb-2") Search
            
        table.table
            thead
                tr
                    th(scope='col') Name
                    th(scope='col') Phone number
                    th(scope='col') More infomation
            tbody   
                each user in users
                    tr
                        td 
                            img(src=user.avatar, width="64")
                        td 
                            p(class="ml-2 mt-2")
                                span= user.name
                        td 
                            p(class="ml-2 mt-2")
                                span= user.phone
                        td 
                            a(href="/users/" + user.id, class="btn btn-info ml-2 mt-1") View


    
    // How to use Script with Pug
    script.
        var searchInput = document.getElementById('input-field');
        var value = searchInput.value;
        searchInput.addEventListener('change', function() {
        sessionStorage.setItem('draft', searchInput.value)})
        searchInput.value = sessionStorage.getItem('draft');